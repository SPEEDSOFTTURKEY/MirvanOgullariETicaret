@{
	ViewData["Title"] = "Index";
	Layout = "~/Views/Shared/_LayoutWebUI.cshtml";
}

<!-- Product -->
<section class="bg0 p-t-23 p-b-140">
	<div class="container">
		<div class="p-b-10">
			<h3 class="ltext-103 cl5">
			</h3>
		</div>
		<br />
		<br />
		<div class="flex-w flex-sb-m p-b-52">
			<div class="flex-w flex-l-m filter-tope-group m-tb-10">

				<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5 how-active1" data-filter="*">
					Tüm Ürünler
				</button>
				@if (ViewBag.AltKategori != null)
				{
					@foreach (var item in ViewBag.AltKategori)
					{
						<button class="stext-106 cl6 hov1 bor3 trans-04 m-r-32 m-tb-5" data-filter=".@item.Id">
							@item.Adi
						</button>
					}

				}

			</div>
		</div>

		<div class="row isotope-grid">
			@if (ViewBag.Urunler != null)
			{
				@foreach (var item in ViewBag.Urunler)
				{
					<div class="col-sm-6 col-md-4 col-lg-3 p-b-35 isotope-item @item.UrunAltKategoriId">
						<!-- Block2 -->
						<div class="block2">
							<div class="block2-pic hov-img0">
								<!-- İlk fotoğrafı almak için iç içe foreach döngüsü -->
								@foreach (var foto in item.UrunFotograf)
								{

									<img src="@foto.FotografKucuk" alt="IMG-PRODUCT">
									@* İlk fotoğrafı aldıktan sonra döngüden çık *@
									break;
								}


						
							</div>

							<div class="block2-txt flex-w flex-t p-t-14">
								<div class="block2-txt-child1 flex-col-l">
									<a href="@Url.Action("Index", "ProductDetail", new { id = item.Id, adi = item.Adi })" class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6">
										@item.Adi
									</a>

									<div class="prices">
										@if (item.IndirimYuzdesi > 0)
										{
											// İndirimli fiyat hesaplaması
											var indirimliFiyat = item.Fiyat - (item.Fiyat * (item.IndirimYuzdesi / 100.0m));
											<span class="stext-105 cl3 line-through old-price">@item.Fiyat TL</span> <!-- Eski fiyat -->
											<span class="stext-105 cl3 new-price">@Math.Round(indirimliFiyat, 2) TL</span> <!-- İndirimli fiyat -->
										}
										else
										{
											<span class="stext-105 cl3">@item.Fiyat TL</span> <!-- Normal fiyat -->
										}
									</div>
								</div>
							</div>

						</div>
					</div>
				}
			}
		</div>
	</div>
</section>

<style>
	/* Eski fiyatın üstünü çizme */
	.old-price {
		text-decoration: line-through;
		font-size: 0.9em; /* Eski fiyatı küçült */
		color: #999; /* Eski fiyatı gri yap */
	}

	/* Yeni fiyat */
	.new-price {
		font-size: 1.2em; /* Yeni fiyatı büyüt */
		font-weight: bold; /* Yeni fiyatı kalın yap */
		color: #e74c3c; /* Yeni fiyatı kırmızı yap */
	}

	/* Fiyatlar alt alta gösterilecek */
	.prices {
		display: block;
		margin-top: 5px; /* Fiyatlar arasındaki boşluğu ayarlayın */
	}

</style>